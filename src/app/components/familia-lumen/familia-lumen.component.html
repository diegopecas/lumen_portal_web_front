<div class="familia-container" [attr.data-theme]="currentTheme.name">
    <!-- Header -->
    <app-header-web [titulo]="'Familia Lumen'" [breadcrumbs]="['Inicio', 'Familia Lumen']" [rutaVolver]="'/'">
    </app-header-web>

    <!-- Hero Section con Bot√≥n Portal -->
    <section class="hero-section">
        <div class="container">
            <div class="hero-content" data-aos="fade-up">
                <h2 class="hero-title themed-title">Bienvenidos a Familia Lumen</h2>
                <p class="hero-description">
                    Tu espacio para acceder a documentos importantes, calendarios y el portal de padres
                </p>

                <!-- Bot√≥n Principal Portal de Padres -->
                <button class="portal-btn themed-portal-btn" [attr.data-theme]="currentTheme.name"
                    (click)="goToPortalPadres()" data-aos="zoom-in" data-aos-delay="200">
                    <span class="portal-icon">üîê</span>
                    <span class="portal-text">
                        <strong>Portal Familia Lumen</strong>
                        <small>Accede a tu informaci√≥n y seguimiento</small>
                    </span>
                    <span class="portal-arrow">‚Üí</span>
                </button>
            </div>
        </div>
    </section>

<!-- Calendario Mensual -->
  <section class="calendario-section">
    <div class="container">
      <h3 class="section-title" data-aos="fade-up">
        <span class="title-icon">üìÖ</span>
        Calendario del Mes
      </h3>

      <!-- Selector de Meses con Tema -->
      <div class="meses-selector" data-aos="fade-up" data-aos-delay="100">
        <button
          *ngFor="let calendario of calendarios"
          class="mes-btn themed-mes-btn"
          [attr.data-theme]="currentTheme.name"
          [class.active]="calendarioSeleccionado?.numero === calendario.numero"
          [class.disabled]="!calendario.disponible"
          [disabled]="!calendario.disponible"
          (click)="seleccionarCalendario(calendario)">
          {{ calendario.mes }}
        </button>
      </div>

      <!-- Visualizador de Calendario -->
      <div class="calendario-viewer" *ngIf="calendarioSeleccionado" data-aos="fade-up" data-aos-delay="200">
        <img 
          [src]="calendarioSeleccionado.imagen" 
          [alt]="'Calendario ' + calendarioSeleccionado.mes"
          class="calendario-img">
      </div>
    </div>
  </section>


<!-- Documentos -->
  <section class="documentos-section">
    <div class="container">
      <h3 class="section-title" data-aos="fade-up">
        <span class="title-icon">üìö</span>
        Documentos Importantes
      </h3>

      <!-- Buscador de Documentos -->
      <div class="search-container" data-aos="fade-up" data-aos-delay="100">
        <div class="search-box themed-search-box" [attr.data-theme]="currentTheme.name">
          <span class="search-icon">üîç</span>
          <input 
            type="text" 
            class="search-input"
            placeholder="Buscar documentos por t√≠tulo o descripci√≥n..."
            [(ngModel)]="searchTerm"
            (input)="onSearchChange($event)">
          <button 
            *ngIf="searchTerm" 
            class="clear-btn"
            (click)="clearSearch()">
            ‚úï
          </button>
        </div>
        <div class="search-results-info" *ngIf="searchTerm">
          <span *ngIf="categoriasFiltradas.length > 0">
            {{ getTotalDocumentos() }} documento(s) encontrado(s)
          </span>
          <span *ngIf="categoriasFiltradas.length === 0" class="no-results">
            No se encontraron documentos con "{{ searchTerm }}"
          </span>
        </div>
      </div>

      <!-- Mensaje cuando no hay resultados -->
      <div 
        *ngIf="categoriasFiltradas.length === 0 && searchTerm" 
        class="no-results-message"
        data-aos="fade-up">
        <div class="no-results-icon">üì≠</div>
        <p>No se encontraron documentos que coincidan con tu b√∫squeda</p>
        <button class="reset-btn" (click)="clearSearch()">
          Ver todos los documentos
        </button>
      </div>

      <!-- Iterar din√°micamente sobre categor√≠as filtradas -->
      <div 
        *ngFor="let categoria of categoriasFiltradas"
        class="categoria-documentos" 
        data-aos="fade-up">
        
        <h4 class="categoria-title">
          {{ categoria.icono }} {{ categoria.titulo }}
        </h4>
        
        <p class="categoria-descripcion" *ngIf="categoria.descripcion">
          {{ categoria.descripcion }}
        </p>

        <div class="documentos-grid">
          <div 
            *ngFor="let doc of categoria.documentos"
            class="doc-card themed-doc-card"
            [attr.data-theme]="currentTheme.name"
            (click)="downloadDocument(doc)">
            <div class="doc-icon">{{ doc.icono }}</div>
            <div class="doc-info">
              <h5 class="doc-title">{{ doc.titulo }}</h5>
              <p class="doc-description">{{ doc.descripcion }}</p>
            </div>
            <div class="doc-action">
              <span class="download-icon">‚¨áÔ∏è</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

    <!-- Informaci√≥n de Contacto -->
    <section class="contacto-section">
        <div class="container">
            <h3 class="section-title" data-aos="fade-up">
                <span class="title-icon">üìû</span>
                Informaci√≥n de Contacto
            </h3>

            <div class="contacto-grid">
                <!-- Correos -->
                <div class="contacto-card" data-aos="fade-up">
                    <div class="contacto-icon">üìß</div>
                    <h4>Correos Electr√≥nicos</h4>
                    <a *ngFor="let correo of contactInfo.correos" [href]="'mailto:' + correo" class="contacto-link">
                        {{ correo }}
                    </a>
                </div>

                <!-- Tel√©fono / WhatsApp -->
                <div class="contacto-card" data-aos="fade-up" data-aos-delay="100">
                    <div class="contacto-icon">üì±</div>
                    <h4>Tel√©fono / WhatsApp</h4>
                    <p>{{ contactInfo.telefono }}</p>
                    <button class="whatsapp-btn" (click)="sendWhatsApp()">
                        üí¨ Escribir por WhatsApp
                    </button>
                </div>

                <!-- Horarios -->
                <div class="contacto-card" data-aos="fade-up" data-aos-delay="200">
                    <div class="contacto-icon">üïê</div>
                    <h4>Horarios de Atenci√≥n</h4>
                    <p><strong>Lunes a Viernes:</strong> {{ contactInfo.horarios.lunesViernes }}</p>
                    <p><strong>Extendido:</strong> {{ contactInfo.horarios.extendido }}</p>
                    <p><strong>S√°bados:</strong> {{ contactInfo.horarios.sabados }}</p>
                </div>

                <!-- Ubicaci√≥n -->
                <div class="contacto-card" data-aos="fade-up" data-aos-delay="300">
                    <div class="contacto-icon">üìç</div>
                    <h4>Ubicaci√≥n</h4>
                    <p>{{ contactInfo.ubicacion.direccion }}</p>
                    <button class="maps-btn" (click)="openMaps()">
                        üó∫Ô∏è Ver en Google Maps
                    </button>
                </div>
            </div>
        </div>
    </section>
</div>